{"remainingRequest":"/home/ec2-user/environment/PlatonViewLogisticReport/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ec2-user/environment/PlatonViewLogisticReport/src/components/FileLoader.vue?vue&type=style&index=0&id=6ddcf5b6&scoped=true&lang=css&","dependencies":[{"path":"/home/ec2-user/environment/PlatonViewLogisticReport/src/components/FileLoader.vue","mtime":1556538435895},{"path":"/home/ec2-user/environment/PlatonViewLogisticReport/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/home/ec2-user/environment/PlatonViewLogisticReport/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/ec2-user/environment/PlatonViewLogisticReport/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/ec2-user/environment/PlatonViewLogisticReport/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ec2-user/environment/PlatonViewLogisticReport/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.ripple {\r\n  box-sizing:border-box;\r\n  position:relative;\r\n}\r\n\r\n.ripple:before {\r\n  animation:ripple 2s ease-out infinite;\r\n  border:solid 2px #09c;\r\n  border-radius:1em;\r\n  bottom:0;\r\n  box-sizing:border-box;\r\n  content:\"\";\r\n  left:0;\r\n  position:absolute;\r\n  right:0;\r\n  top:0;\r\n}\r\n\r\n.ripple:after {\r\n  animation:ripple 2s 1s ease-out infinite;\r\n  border:solid 2px #09c;\r\n  border-radius:2em;\r\n  bottom:0;\r\n  box-sizing:border-box;\r\n  content:\"\";\r\n  left:0;\r\n  position:absolute;\r\n  right:0;\r\n  top:0;\r\n}\r\n\r\n@keyframes ripple {\r\n  0% {\r\n    opacity:.25;\r\n  }\r\n  100% {\r\n    border-radius:2em;\r\n    opacity:0;\r\n    transform:scale(3);\r\n  }\r\n}\r\n",{"version":3,"sources":["FileLoader.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0GA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"FileLoader.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <v-container grid-list-xl text-xs-center>\r\n    <v-layout row wrap>\r\n      <v-flex xs10 offset-xs1>\r\n        <v-btn fab color=\"primary ripple\" @click=\"$refs.inputUpload.click()\">\r\n          <v-icon>attach_file</v-icon>\r\n        </v-btn>\r\n        <input v-show=\"false\" ref=\"inputUpload\" accept=\".csv\" type=\"file\" @change=\"loadCSV($event)\">\r\n      </v-flex>\r\n    </v-layout>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions, mapGetters } from \"vuex\";\r\n\r\nexport default {\r\n  name: \"FileLoader\",\r\n  components: {},\r\n  data() {\r\n    return {\r\n      headers: [\r\n        { key: \"startDate\", type: \"Data\" },\r\n        { key: \"endDate\", type: \"Data\" },\r\n        { key: \"numberCar\", type: \"String\" },\r\n        { key: \"respoder\", type: \"String\" },\r\n        { key: \"distance\", type: \"Number\" },\r\n        { key: \"title\", type: \"String\" },\r\n        { key: \"pointEntry\", type: \"Array\" },\r\n        { key: \"exitPoint\", type: \"Array\" }\r\n      ],\r\n      parse_csv: []\r\n    };\r\n  },\r\n  methods: {\r\n    ...mapActions([\"addToItems\"]),\r\n    convetoType(type, data) {\r\n      if (typeof data !== \"undefined\") {\r\n        switch (type) {\r\n          case \"Number\":\r\n            let ns = data.replace(/,/g, \".\");\r\n            return parseFloat(ns); //Number(data);\r\n            break;\r\n          case \"Array\":\r\n            return data;\r\n            break;\r\n          case \"Data\":\r\n            let values = data.split(/[^0-9]/),\r\n              year = parseInt(values[2], 10),\r\n              month = parseInt(values[1], 10) - 1, // Month is zero based, so subtract 1\r\n              day = parseInt(values[0], 10),\r\n              hours = parseInt(values[3], 10),\r\n              minutes = parseInt(values[4], 10),\r\n              seconds = parseInt(values[5], 10);\r\n            return new Date(year, month, day, hours, minutes, seconds);\r\n            break;\r\n          default:\r\n            return data;\r\n        }\r\n      }\r\n    },\r\n    csvJSON(csv) {\r\n      let vm = this;\r\n      let lines = csv.split(\"\\n\");\r\n      var result = [];\r\n      lines.map(function(line, indexLine) {\r\n        if (indexLine < 1) return; // Jump header line\r\n        var obj = {};\r\n        var currentline = line.split(\";\");\r\n        vm.headers.map(function(header, indexHeader) {\r\n          //console.log(typeof(currentline[indexHeader]));\r\n          obj[header[\"key\"]] = vm.convetoType(\r\n            header[\"type\"],\r\n            currentline[indexHeader]\r\n          );\r\n        });\r\n        result.push(obj);\r\n      });\r\n      result.pop(); // remove the last item because undefined values\r\n      return result; // JavaScript object\r\n    },\r\n    loadCSV(e) {\r\n      let vm = this;\r\n      if (window.FileReader) {\r\n        const reader = new FileReader();\r\n        reader.readAsText(e.target.files[0], \"cp1251\");\r\n        // Handle errors load\r\n        reader.onload = function(event) {\r\n          let csv = event.target.result;\r\n          //vm.parse_csv = vm.csvJSON(csv);\r\n          vm.addToItems(vm.csvJSON(csv));\r\n        };\r\n        reader.onerror = function(evt) {\r\n          if (evt.target.error.name == \"NotReadableError\") {\r\n            alert(\"Canno't read file !\");\r\n          }\r\n        };\r\n      } else {\r\n        alert(\"FileReader are not supported in this browser.\");\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.ripple {\r\n  box-sizing:border-box;\r\n  position:relative;\r\n}\r\n\r\n.ripple:before {\r\n  animation:ripple 2s ease-out infinite;\r\n  border:solid 2px #09c;\r\n  border-radius:1em;\r\n  bottom:0;\r\n  box-sizing:border-box;\r\n  content:\"\";\r\n  left:0;\r\n  position:absolute;\r\n  right:0;\r\n  top:0;\r\n}\r\n\r\n.ripple:after {\r\n  animation:ripple 2s 1s ease-out infinite;\r\n  border:solid 2px #09c;\r\n  border-radius:2em;\r\n  bottom:0;\r\n  box-sizing:border-box;\r\n  content:\"\";\r\n  left:0;\r\n  position:absolute;\r\n  right:0;\r\n  top:0;\r\n}\r\n\r\n@keyframes ripple {\r\n  0% {\r\n    opacity:.25;\r\n  }\r\n  100% {\r\n    border-radius:2em;\r\n    opacity:0;\r\n    transform:scale(3);\r\n  }\r\n}\r\n</style>\r\n"]}]}